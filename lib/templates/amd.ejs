define([<%-["\"require\"", "\"module\"", "\"exports\""].concat(dependencies.map(function(dep) {
  return "\"" + dep.alias + "\"";
})).join(", ") %>], function(require, module, exports) {

    var __dirname = "<%-__dirname %>",
    __filename    = "<%-__filename %>";

    <%
      dependencies.forEach(function(dep) {
        content = content.replace(new RegExp("[\"\']"+dep.relPath+"[\"\']", "g"), "\""+dep.alias+"\"")
      });
    %>

    <%-content %>

    return module.exports;
});